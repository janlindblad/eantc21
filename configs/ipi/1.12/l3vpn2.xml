<devices xmlns="http://tail-f.com/ns/ncs">
 <device>
  <name>ipi-31x</name>
  <config
        xmlns:oc-types="http://openconfig.net/yang/openconfig-types"
        xmlns:oc-pol-types="http://openconfig.net/yang/policy-types"
        xmlns:oc-ni-types="http://openconfig.net/yang/network-instance-types"
        xmlns:ianaift="urn:ietf:params:xml:ns:yang:iana-if-type">

    <network-instances xmlns="http://openconfig.net/yang/network-instance">
      <network-instance>
        <name>MBH_VPN_S1</name>
        <config>
          <name>MBH_VPN_S1</name>
          <type>oc-ni-types:L3VRF</type>
          <enabled>true</enabled>
          <enabled-address-families>oc-types:IPV4</enabled-address-families>
          <enabled-address-families>oc-types:IPV6</enabled-address-families>
          <router-id>172.16.1.1</router-id>
          <description>"Fusion L3VPN S1 TRAFFIC VLAN100"</description>
          <route-distinguisher>65000:100</route-distinguisher>
        </config>
        <inter-instance-policies>
          <apply-policy>
            <config>
              <export-policy>RT_EXPORT_POLICY</export-policy>
              <import-policy>RT_IMPORT_POLICY</import-policy>
            </config>
          </apply-policy>
        </inter-instance-policies>
        <interfaces>
          <interface>
            <id>eth1</id>
            <config>
              <id>eth1</id>
              <interface>eth1</interface>
            </config>
          </interface>        
        </interfaces>
        <protocols>
          <protocol>
            <identifier>oc-pol-types:BGP</identifier>
            <name>65000</name>
            <bgp>
              <global>
                <config>
                  <as>65000</as>
                </config>
              </global>
            </bgp>
            <config>
              <identifier>oc-pol-types:BGP</identifier>
              <name>65000</name>
              <enabled>true</enabled>
            </config>
          </protocol>
          <protocol>
            <identifier>oc-pol-types:DIRECTLY_CONNECTED</identifier>
            <name>DIRECTLY_CONNECTED</name>
            <config>
              <identifier>oc-pol-types:DIRECTLY_CONNECTED</identifier>
              <name>DIRECTLY_CONNECTED</name>
              <enabled>true</enabled>
            </config>
          </protocol>
        </protocols>
        <encapsulation>
          <config>
            <label-allocation-mode>INSTANCE_LABEL</label-allocation-mode>
            <encapsulation-type>MPLS</encapsulation-type>
          </config>
        </encapsulation>
        <tables>
          <table>
            <protocol>oc-pol-types:BGP</protocol>
            <address-family>oc-types:IPV4</address-family>
            <config>
              <protocol>oc-pol-types:BGP</protocol>
              <address-family>oc-types:IPV4</address-family>
            </config>
          </table>
          <table>
            <protocol>oc-pol-types:DIRECTLY_CONNECTED</protocol>
            <address-family>oc-types:IPV4</address-family>
            <config>
              <protocol>oc-pol-types:DIRECTLY_CONNECTED</protocol>
              <address-family>oc-types:IPV4</address-family>
            </config>
          </table>
        </tables>
        <table-connections>
          <table-connection>
            <src-protocol>oc-pol-types:DIRECTLY_CONNECTED</src-protocol>
            <dst-protocol>oc-pol-types:BGP</dst-protocol>
            <address-family>oc-types:IPV4</address-family>
            <config>
              <dst-protocol>oc-pol-types:BGP</dst-protocol>
              <address-family>oc-types:IPV4</address-family>
              <dst-instance xmlns="http://www.ipinfusion.com/yang/ocnos/ipi-oc-ni-augments">65000</dst-instance>
              <default-import-policy>ACCEPT_ROUTE</default-import-policy>
              <src-protocol>oc-pol-types:DIRECTLY_CONNECTED</src-protocol>
            </config>
          </table-connection>
        </table-connections>
      </network-instance>
    </network-instances>

    <routing-policy xmlns="http://openconfig.net/yang/routing-policy">
      <defined-sets>
        <bgp-defined-sets xmlns="http://openconfig.net/yang/bgp-policy">
          <ext-community-sets>
            <ext-community-set>
              <ext-community-set-name>RT_COMMUNITY_SET</ext-community-set-name>
              <config>
                <ext-community-set-name>RT_COMMUNITY_SET</ext-community-set-name>
                <ext-community-member>65000:100</ext-community-member>
                <match-set-options>ANY</match-set-options>
              </config>
            </ext-community-set>
          </ext-community-sets>
        </bgp-defined-sets>
      </defined-sets>
      <policy-definitions>
        <policy-definition>
          <name>RT_EXPORT_POLICY</name>
          <statements>
            <statement>
              <name>1</name><!-- FIXME name>RT_EXPORT_POLICY_STM_1</name-->
              <config>
                <name>1</name><!--FIXME name>RT_EXPORT_POLICY_STM_1</name-->
              </config>
              <actions>
                <config>
                  <policy-result>ACCEPT_ROUTE</policy-result>
                </config>
              </actions>
              <conditions>
                <bgp-conditions xmlns="http://openconfig.net/yang/bgp-policy">
                  <config>
                    <ext-community-set>RT_COMMUNITY_SET</ext-community-set>
                  </config>
                </bgp-conditions>
                <config>
                  <install-protocol-eq>oc-pol-types:BGP</install-protocol-eq>
                </config>
              </conditions>
            </statement>
          </statements>
          <config>
            <name>RT_EXPORT_POLICY</name>
          </config>
        </policy-definition>
        <policy-definition>
          <name>RT_IMPORT_POLICY</name>
          <statements>
            <statement>
              <name>1</name><!-- FIXME name>RT_IMPORT_POLICY_STM_1</name-->
              <config>
                <name>1</name><!-- FIXME name>RT_IMPORT_POLICY_STM_1</name-->
              </config>
              <actions>
                <config>
                  <policy-result>ACCEPT_ROUTE</policy-result>
                </config>
              </actions>
              <conditions>
                <bgp-conditions xmlns="http://openconfig.net/yang/bgp-policy">
                  <config>
                    <ext-community-set>RT_COMMUNITY_SET</ext-community-set>
                  </config>
                </bgp-conditions>
                <config>
                  <install-protocol-eq>oc-pol-types:BGP</install-protocol-eq>
                </config>
              </conditions>
            </statement>
          </statements>
          <config>
            <name>RT_IMPORT_POLICY</name>
          </config>
        </policy-definition>
        <policy-definition>
          <name>REDISTRIBUTE_CONNECTED_</name>
          <statements>
            <statement>
              <name>1</name><!-- FIXME name>REDISTRIBUTE_CONNECTED__STM_1</name-->
              <config>
                <name>1</name><!-- FIXME name>REDISTRIBUTE_CONNECTED__STM_1</name-->
              </config>
              <actions>
                <config>
                  <policy-result>ACCEPT_ROUTE</policy-result>
                </config>
              </actions>
            </statement>
          </statements>
          <config>
            <name>REDISTRIBUTE_CONNECTED_</name>
          </config>
        </policy-definition>
      </policy-definitions>
    </routing-policy>

    <interfaces xmlns="http://openconfig.net/yang/interfaces">
      <interface>
        <name>eth1</name>
        <config>
          <description>"NODE_B_SITE_XXX_VLAN_100_S1"</description>
          <mtu>1600</mtu>
          <name>eth1</name>
          <type>ianaift:ethernetCsmacd</type>
        </config>
        <ethernet xmlns="http://openconfig.net/yang/interfaces/ethernet">
          <config>
            <duplex-mode>FULL</duplex-mode>
          </config>
        </ethernet>
        <subinterfaces>
          <subinterface>
            <index>0</index>
            <ipv4 xmlns="http://openconfig.net/yang/interfaces/ip">
              <config/>
              <addresses>
                <address>
                  <ip>192.168.100.1</ip>
                  <config>
                    <ip>192.168.100.1</ip>
                    <prefix-length>30</prefix-length>
                  </config>
                </address>
              </addresses>
            </ipv4>
            <config>
              <index>0</index>
            </config>
          </subinterface>
        </subinterfaces>
      </interface>
    </interfaces>

  </config>
 </device>
</devices>